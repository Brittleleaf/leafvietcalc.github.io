<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Retiros USD</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@300;400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap'); /* Fuente Nunito */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap'); /* Fuente Montserrat */

        @font-face {
            font-family: 'Heavitas';
            src: url('https://fonts.cdnfonts.com/s/21068/Heavitas.woff') format('woff');
        }
        body { 
            font-family: 'Montserrat', sans-serif; /* Cambié a Montserrat para el cuerpo de la página */
            text-align: center; 
            margin: 20px; 
            background: url('Images/background.jpg') no-repeat center center fixed;
            background-size: cover;
            background-color: #070612; 
            color: white;
        }
        .container { 
            max-width: 380px; 
            margin: auto; 
            padding: 20px;
            border-radius: 15px;
            background-color: rgba(29, 31, 40, 0.5); /* Fondo más transparente y difuso */
            backdrop-filter: blur(8px); /* Efecto difuso de fondo */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Borde tenue */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7); /* Sombra más suave */
        }
        .prex-container-arg {
            background-color: rgba(112, 38, 221, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #A7D8FF;
            box-shadow: 0 4px 10px rgba(112, 38, 221, 0.5);
        }
        .prex-container-uy {
            background-color: rgba(25, 11, 48, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #6921b7;
            box-shadow: 0 4px 10px rgba(105, 33, 183, 0.5);
        }
        .dolarapp-container {
            background-color: rgba(34, 208, 129, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #ffffff;
            box-shadow: 0 4px 10px rgba(34, 208, 129, 0.5);
        }
        input, button { 
            margin: 10px 0; 
            padding: 12px; 
            width: 100%; 
            border: none;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s ease;
            background-color: white; /* Fondo blanco */
            color: black;
            border: 2px solid transparent; /* Borde transparente por defecto */
        }
        input:focus, button:focus { 
            outline: none; 
            box-shadow: 0 0 10px rgba(188, 44, 230, 0.7);
            border: 2px solid transparent; /* Asegurar que el borde siga siendo transparente */
        }
        input:focus {
            border: 2px solid transparent;
            box-shadow: 0 0 10px rgba(188, 44, 230, 0.7); /* Borde con efecto */
        }
        button {
            background: linear-gradient(to right, #bc2ce6, #6f12dc);
            color: white;
            font-family: 'Nunito', sans-serif; /* Fuente Nunito para el botón */
            font-size: 18px;
            cursor: pointer;
            box-shadow: 3px 3px 10px rgba(188, 44, 230, 0.5);
            transition: background-color 0.3s, transform 0.3s ease, box-shadow 0.3s;
        }
        button:hover {
            background: linear-gradient(to right, #6f12dc, #bc2ce6);
            transform: scale(1.1);
            box-shadow: 5px 5px 15px rgba(188, 44, 230, 0.7);
        }

        /* Estilo para el mensaje al final de la página */
        .desarrollado {
            margin-top: 10px;
            color: white;
            font-size: 16px;
        }
        .desarrollado p {
            text-align: center;
            font-weight: normal;
        }

        /* Estilo para las barras separadoras */
        hr {
            border: 0;
            height: 1px;
            background-color: #fff;
            margin: 10px 0; /* Menor margen para acercar las barras al botón */
        }

        /* Ajuste de las imágenes al 70% */
        .logo {
            width: 70%;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="https://www.instagram.com/brittleleaf/">
            <img src="Images/leafviet.png" alt="Logo" class="logo">
        </a>
        <h2>Calculadora de Retiros USD</h2>
        <label for="monto">Monto que deseas extraer (USD):</label>
        <input type="number" id="monto" placeholder="Ingrese el monto (min 5 USD)" onchange="calcular()">
        <p class="alerta" id="mensajeEmergencia" style="display: none;">El monto mínimo es 5 USD</p>
        <h3>Resultados</h3>

        <div class="prex-container-arg">
            <a href="https://play.google.com/store/apps/details?id=air.PrexArgentina" target="_blank">
                <img src="Images/PREXARG.png" alt="Logo Prex ARG" class="logo">
            </a>
            <p>Monto neto a recibir: <span id="totalPrexARG">-</span> USD</p>
            <label for="cotizacionPrexARG">Valor del dólar en PREX ARG:</label>
            <input type="number" id="cotizacionPrexARG" placeholder="Ingrese cotización">
            <p>Equivalente en Pesos: <span id="pesosPrexARG">-</span> ARS</p>
        </div>

        <div class="prex-container-uy">
            <a href="https://play.google.com/store/apps/details?id=air.Prex" target="_blank">
                <img src="Images/PREXUY.png" alt="Logo Prex UY" class="logo">
            </a>
            <p>Monto neto a recibir: <span id="totalPrexUY">-</span> USD</p>
            <label for="cotizacionPrexUY">Valor del dólar en PREX UY:</label>
            <input type="number" id="cotizacionPrexUY" placeholder="Ingrese cotización">
            <p>Equivalente en Pesos: <span id="pesosPrexUY">-</span> ARS</p>
        </div>

        <div class="dolarapp-container">
            <a href="https://www.dolarapp.com/referrals/blk?referralCode=nicoluciel_C9x" target="_blank">
                <img src="Images/dolarapp.png" alt="Logo Dólar App" class="logo">
            </a>
            <p>Monto neto a recibir: <span id="totalDolarApp">-</span> USD</p>
            <p>Valor del dólar en Dólar App: <span id="valorDolarApp">-</span></p>
            <p>Equivalente en Pesos: <span id="pesosDolarApp">-</span> ARS</p>
        </div>
        
        <hr> <!-- Barra separadora encima del botón -->

        <button onclick="calcular()">Calcular</button>

        <!-- Barra separadora antes del mensaje -->
        <hr>

        <!-- Mensaje al final de la página -->
        <div class="desarrollado">
            <p>Desarrollado por <strong>Brittleleaf</strong></p>
        </div>
    </div>

    <script>
        async function obtenerCotizacionDolarApp() {
            try {
                const response = await fetch("https://criptoya.com/api/dolarapp/USDC/ARS/1");
                const data = await response.json();
                document.getElementById("valorDolarApp").innerText = formatCurrency(data.totalBid);
                return data.totalBid;
            } catch (error) {
                console.error("Error al obtener la cotización de Dólar App:", error);
            }
        }

        function formatCurrency(amount) {
            if (isNaN(amount)) return '-';
            return '$ ' + amount.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        async function calcular() {
            let monto = parseFloat(document.getElementById("monto").value);
            let mensajeEmergencia = document.getElementById("mensajeEmergencia");
            if (isNaN(monto) || monto < 5) {
                mensajeEmergencia.style.display = 'block';
                return;
            } else {
                mensajeEmergencia.style.display = 'none';
            }

            let totalPrexARG = monto;
            document.getElementById("totalPrexARG").innerText = formatCurrency(totalPrexARG);

            let cotizacionPrexARG = parseFloat(document.getElementById("cotizacionPrexARG").value); 
            if (!isNaN(cotizacionPrexARG)) {
                let pesosPrexARG = totalPrexARG * cotizacionPrexARG;
                document.getElementById("pesosPrexARG").innerText = formatCurrency(pesosPrexARG);
            }

            let totalPrexUY = monto - 4.88;
            document.getElementById("totalPrexUY").innerText = formatCurrency(totalPrexUY);

            let cotizacionPrexUY = parseFloat(document.getElementById("cotizacionPrexUY").value);
            if (!isNaN(cotizacionPrexUY)) {
                let pesosPrexUY = totalPrexUY * cotizacionPrexUY;
                document.getElementById("pesosPrexUY").innerText = formatCurrency(pesosPrexUY);
            }

            let cotizacionDolarApp = await obtenerCotizacionDolarApp();
            if (!isNaN(cotizacionDolarApp)) {
                let totalDolarApp = monto - 3 - (monto * 0.035);
                document.getElementById("totalDolarApp").innerText = formatCurrency(totalDolarApp);

                let pesosDolarApp = totalDolarApp * cotizacionDolarApp;
                document.getElementById("pesosDolarApp").innerText = formatCurrency(pesosDolarApp);
            }
        }

        obtenerCotizacionDolarApp();  // Asegura que la cotización se cargue al iniciar
    </script>
</body>
</html>
